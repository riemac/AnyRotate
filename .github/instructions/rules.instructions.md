---
applyTo: '**'
---
## 触发条件
- 询问isaacsim/isaaclab等有关问题或基于isaacsim/isaaclab进行开发时
- 不是所有对话都要基于该规则，根据情况自行判断

## 核心开发与协作原则

### 1. 🤖 主动反馈优先 (Proactive Feedback First) - [核心新增]

这是最重要的原则。在执行任何**非琐碎**的任务（例如，编写超过10行代码、设计新环境、修改关键逻辑、执行复杂的调试步骤）之前，**必须**使用 `mcp-feedback-enhanced` 工具来与我沟通。

- **任务规划阶段**: 在动手编码前，使用 `interactive_feedback` 提出你的实现思路、关键步骤和需要确认的细节（例如：“我计划分三步：1. 创建环境类 2. 定义观察空间 3. 设置奖励函数。您对奖励函数的具体设计有何要求？”）。
- **执行关键操作前**: 在进行文件修改、安装新依赖或执行可能产生副作用的命令前，必须请求确认。

### 2. 🧐 杜绝臆想，事实驱动

始终以可查证的事实为依据。你的一切行为都应基于从以下信息源获取的知识，严禁编造或猜测 API。

- **第一信息源**: IsaacLab 本地源码、文档和示例。
- **第二信息源**: `context7` 工具提供的官方文档。
- **第三信息源**: 网络搜索到的官方或权威技术资料。

---

## 📝 开发与调试工作流

当在开发和调试过程中遇到问题时，你应严格遵循以下分阶段的工作流。

### 阶段一：任务理解与规划

当你接收到一个新的开发任务时：

1.  **分析需求**: 拆解我的需求，识别出其中的关键实体、目标和约束。
2.  **启动反馈**: **立即调用 `interactive_feedback`**，向我呈现你对任务的理解，并提出需要澄清的问题。这可以避免从一开始就出现方向性偏差。

### 阶段二：信息查询与探索

当你在开发中遇到不熟悉的 IsaacLab API、USD 概念或任何技术细节时：

1.  **制定查询计划**: 根据“核心原则”中的信息源优先级，在脑中形成一个查询计划。
2.  **（可选）快速确认**: 如果你不确定从何查起，可以简单提问，例如：“关于 `AssetCFG` 的详细用法，我将优先查询 IsaacLab 源码中的 `omni.isaac.lab.sim.spawners` 目录，这正确吗？”
3.  **执行查询**: 按照以下顺序执行查询，直到找到答案：
    1.  **优先查阅IsaacLab源码和文档**: 在 IsaacLab 项目目录中查找。关键路径包括：`docs/`、`source/`、`examples/`、`scripts/tutorials`。
    2.  **使用context7工具查询**: 调用 `mcp_context7_resolve-library-id` 和 `mcp_context7_get-library-docs`，精确搜索 `isaaclab` 或 `usd` 等关键词。
    3.  **其次使用网络搜索**: 如果内部文档无法解决，再进行网络搜索。

### 阶段三：调试与错误处理

当代码出现错误或行为不符合预期时：

1.  **收集环境信息**: **立即调用 `get_system_info`**，获取当前的系统环境（OS, Python 版本等），这是诊断问题的第一步。
2.  **分析错误**: 结合错误日志和系统环境信息，形成一个关于错误原因的初步假设。
3.  **提出调试方案**: **调用 `interactive_feedback`**，向我清晰地展示：
    - 你收集到的错误信息和系统环境。
    - 你对错误原因的猜测。
    - 你计划采取的、分好步骤的调试方案。
4.  **等待授权**: 获得我的同意后，再开始执行调试操作。

---

## 🏛️ 工作区与代码实践

- **工作区结构**: 严格遵守**leaphand (开发项目)** 和 **IsaacLab (核心框架)** 的分离，绝不直接修改 IsaacLab 核心代码。
- **代码风格**: 保持与 IsaacLab 项目一致，提供丰富且易于理解的注释。
- **善用框架**: 充分利用 IsaacLab 提供的现有工具和框架功能，避免重复造轮子。
